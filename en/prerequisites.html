<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				
			
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Prerequisites</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/rwd-table.min.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/layout-custom-style.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/rwd-table.min.js" type="text/javascript"></script><script src="../js/responsive-tables.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/lunr.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="js/data.js" type="text/javascript"></script><script src="../js/search.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta name="generator" content="Paligo"></meta><link rel="prev" href="terminology.html" title="Terminology"></link><link rel="next" href="steps-to-run-the-script.html" title="Steps to Run the Script"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script async="" src="https://www.googletagmanager.com/gtag/js?id=2349419734"></script><script type="text/javascript">var propertyid = '2349419734';

						window.dataLayer = window.dataLayer || [];
						function gtag(){dataLayer.push(arguments)};
						gtag('js', new Date());
						
						gtag('config', propertyid);
					</script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><h1 class="publication-title">Netskope Help</h1><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print print-icon"><a onclick="window.print();return false;"><i class="fa fa-print" aria-hidden="true"><span class="print-text">print</span></i></a></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="index-en.html">Netskope Help</a></li><li class="breadcrumb-link"><a href="network-security.html">Network Security</a></li><li class="breadcrumb-link"><a href="netskope-public-cloud-security.html"><span class="phrase">Netskope Public Cloud Security</span></a></li><li class="breadcrumb-link"><a href="continuous-security-assessment-for-amazon-web-services.html">Continuous Security Assessment for Amazon Web Services</a></li><li class="breadcrumb-link"><a href="setting-up-aws-instances-using-old-ui.html">Setting Up AWS Instances using Old UI</a></li><li class="breadcrumb-link"><a href="setting-up-multiple-aws-instances.html">Setting up Multiple AWS Instances</a></li><li class="breadcrumb-node">Prerequisites</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="terminology.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="steps-to-run-the-script.html">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-a2df26d1-34f8-d952-d9fa-33d6891c611e" data-permalink="prerequisites.html" data-topic-level="1" data-relative-prefix="" data-time-modified="February 13, 2021" data-publication-date="" id="UUID-de88689a-fb13-590c-d43d-f14633c432a7"><div class="titlepage"><div><div class="title"><h6 class="title">Prerequisites</h6></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Netskope tenant host name and API token. Refer to the Netskope REST API documentation located <a class="link" href="public-cloud-api-endpoints.html" title="Public Cloud API Endpoints">here</a>.</p></li><li class="listitem"><p>Permissions for the script to create resources/policies in the sub-accounts. An AWS sub-account can be configured for CSA in a couple of ways:</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>Using a role that belongs to the sub-account and can be assumed from the master account. In this case, the role details (ARN and External ID) and the master account credentials (access key and secret key) must be populated in the “<span class="strong strong"><strong>assume_role</strong></span>” section in the <a class="xref" href="prerequisites.html#UUID-cb9e026b-9761-b29e-5e8a-0cbcf85aec03" title="JSON Configuration File Template"><span class="xreftitle">JSON Configuration File Template</span></a>. The role must be configured with an external ID (even though both master and sub-account belong to the same customer/organization) and is recommended to have "AdministratorAccess" policy attached.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>The AdministratorAccess permission is granted only to the master account within the customer’s organization, not to Netskope. If a role with lower privileges is preferred, refer to <a class="xref" href="appendix.html#UUID-3290629c-b55b-99db-34c0-eccd1d7266bb" title="Lower Privilege for Sub-Account Role that Trusts Master Account"><span class="xreftitle">Lower Privilege for Sub-Account Role that Trusts Master Account</span></a>.</p></div></li><li class="listitem"><p>Using the access token for a user that exists in the sub-account itself. In this case, the access key ID and secret access key of that user must be populated in the “<span class="strong strong"><strong>token</strong></span>” section in the <a class="xref" href="prerequisites.html#UUID-cb9e026b-9761-b29e-5e8a-0cbcf85aec03" title="JSON Configuration File Template"><span class="xreftitle">JSON Configuration File Template</span></a>. The user must have "AdministratorAccess" policy permission. For lower privileges, refer to the <a class="xref" href="appendix.html#UUID-3290629c-b55b-99db-34c0-eccd1d7266bb" title="Lower Privilege for Sub-Account Role that Trusts Master Account"><span class="xreftitle">Lower Privilege for Sub-Account Role that Trusts Master Account</span></a>.</p></li></ol></div></li></ul></div><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-2bd0b5d8-f1f8-7070-c4dc-c1cf9b7d8e81" data-time-modified="October 22, 2019" data-publication-date="" id="UUID-cb9e026b-9761-b29e-5e8a-0cbcf85aec03"><div class="titlepage"><div><div class="title"><h6 class="title">JSON Configuration File Template</h6></div></div></div><p>The name of the configuration file can be anything as long as it matches the name specified in the script arguments. For each AWS account to be set up, create one entry in the “instances” JSON array.</p><pre class="programlisting">{
    "instances":
    [  
        {  
            "config":
            {  
                "instance_name":"...",
                "securityscan_interval":60,
                "email_id":"...",
                "use_for":
                [           
                    "securityscan"
                ]
            },
            "credentials":
            {  
                "assumeRole":{  
                "role_arn":"...",
                "external_id":"...",
                "access_key_id":"...",
                "secret_access_key":"..."
            },
            "token":
            {  
                "access_key_id":"...",
                "secret_access_key":"..."
            }
        }
    ]
}
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="strong strong"><strong>instance_name</strong></span>: [REQUIRED] Name of Instance. Instance name should only have alphanumeric characters without any special characters or spaces. It is recommended to have the instance_name be the same as the AWS account name.</p></li><li class="listitem"><p><span class="strong strong"><strong>securityscan_interval</strong></span>: [REQUIRED] Selected interval to run Security Scan in minutes. Allowed values are 30, 60, 120, 360, 1440.</p></li><li class="listitem"><p><span class="strong strong"><strong>email_id</strong></span>: [REQUIRED] Email of the User. It is recommended that this email is the owner of the Account, but you can use a single email for all the sub-accounts.</p></li><li class="listitem"><p><span class="strong strong"><strong>use_for</strong></span>: [REQUIRED] Netskope feature to be used. For CSA scans only use “securityscan”.</p></li><li class="listitem"><p><span class="strong strong"><strong>credentials:</strong></span></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><span class="strong strong"><strong>assumeRole</strong></span>: [OPTIONAL] Details of role with required privileges to run CFT template.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p><span class="strong strong"><strong>role_arn</strong></span>: [REQUIRED] ARN of the role in the sub-account that has a trust relationship with the master account. The role should be set up with an external ID and permission should have "AdministratorAccess" policy.</p></li><li class="listitem"><p><span class="strong strong"><strong>external_id</strong></span>: [REQUIRED] External ID provided in the IAM role above.</p></li><li class="listitem"><p><span class="strong strong"><strong>access_key_id</strong></span>: [REQUIRED] The access key ID of the user in the master account which has STS policy with read/write permissions for all resources.</p></li><li class="listitem"><p><span class="strong strong"><strong>secret_access_key</strong></span>: [REQUIRED] Secret access key of the user in the master account</p></li></ul></div></li><li class="listitem"><p><span class="strong strong"><strong>token</strong></span>: [OPTIONAL] Credentials of an AWS user with required privileges to run CFT template.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p><span class="strong strong"><strong>access_key_id</strong></span>: [REQUIRED] IAM access key ID for the account to be added to Netskope IaaS</p></li><li class="listitem"><p><span class="strong strong"><strong>secret_access_key</strong></span>: [REQUIRED] IAM secret access key for the account to be added to Netskope IaaS</p></li></ul></div></li></ul></div><div dir="ltr" class="note"><h3 class="title">Note</h3><p id="UUID-cb9e026b-9761-b29e-5e8a-0cbcf85aec03_para-idm43143443521880">Either <span class="bold bold"><strong>assumeRole</strong></span> or <span class="bold bold"><strong>token</strong></span> is mandatory.</p></div></li></ul></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-dc69e12b-9d32-f5d1-aab9-28870c48b590" data-time-modified="October 22, 2019" data-publication-date="" id="UUID-30a6ef83-820a-791c-2de6-46b6277705ac"><div class="titlepage"><div><div class="title"><h6 class="title">Configuration File Example</h6></div></div></div><p>The example file below configures &lt;sub-account 1&gt; using roles and &lt;sub-account 2&gt; using user access tokens.</p><pre class="programlisting">{
    "instances":
    [  
        {  
            "config":
            {  
                "instance_name":"&lt;sub-account 1 name&gt;",
                "securityscan_interval":60,
                "email_id":"&lt;account1_admin@company.com&gt;",
                "use_for":
                [
                    "securityscan"
                ]
            },
            "credentials":
            {  
                "assumeRole":
                {  
                    "role_arn":"arn:aws:iam::&lt;id&gt;:role/master-admin-role",
                    "external_id":"&lt;external id string&gt;",
                    "access_key_id":"&lt;access key id of master account&gt;",
                    "secret_access_key":"&lt;secret access key of master account&gt;"
                }
            }
        },
        {  
            "config":
            {  
                "instance_name":"&lt;AWS sub-account 2&gt;",
                "securityscan_interval":60,
                "email_id":"&lt;account2_admin@company.com&gt;",
                "use_for":
                [  
                    "securityscan"
                ]
            },
            "credentials":
            {  
                "token":
                {  
                    "access_key_id":"&lt;access key id of sub-account 2&gt;",
                    "secret_access_key":"&lt;secret access key of sub-account 2&gt;"
                }
            }
        }
    ]
}
</pre></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-de88689a-fb13-590c-d43d-f14633c432a7">Prerequisites</a></li><li><a href="#UUID-cb9e026b-9761-b29e-5e8a-0cbcf85aec03">JSON Configuration File Template</a></li><li><a href="#UUID-30a6ef83-820a-791c-2de6-46b6277705ac">Configuration File Example</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div id="email-feedback" class="no-voting toggle-feedback"><p><a href="mailto:techpubs@netskope.com?subject=Feedback%20for%20help%20topic%20%22Prerequisites%22&amp;body=%0A%09%09%09%09%0A%09%09%09%09%0A%09%09%09%09_______________________%0A%09%09%09%09%0A%09%09%09Please%20add%20your%20feedback%20above%20for%20topic%20%22Prerequisites%22%20in%20the%20publication%20%22Netskope%20Help%22."><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon"></i>Would you like to provide feedback? Just click here to suggest edits.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="terminology.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="steps-to-run-the-script.html">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2021 Netskope </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">February 13, 2021</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
