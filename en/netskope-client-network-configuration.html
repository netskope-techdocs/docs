<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				
			
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Netskope Client Network Configuration</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/rwd-table.min.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/layout-custom-style.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/rwd-table.min.js" type="text/javascript"></script><script src="../js/responsive-tables.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/lunr.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="js/data.js" type="text/javascript"></script><script src="../js/search.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta name="generator" content="Paligo"></meta><link rel="prev" href="netskope-client-admin-configuration.html#idp205713" title="Client Status"></link><link rel="next" href="netskope-client-network-configuration.html#UUID-a2a0293d-39ce-4363-692c-821e3af7357b_section-idm231801459591667" title="Netskope Client PoP Selection"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script async="" src="https://www.googletagmanager.com/gtag/js?id=256425220"></script><script type="text/javascript">var propertyid = '256425220';

						window.dataLayer = window.dataLayer || [];
						function gtag(){dataLayer.push(arguments)};
						gtag('js', new Date());
						
						gtag('config', propertyid);
					</script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><h1 class="publication-title">Netskope Help</h1><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print print-icon"><a onclick="window.print();return false;"><i class="fa fa-print" aria-hidden="true"><span class="print-text">print</span></i></a></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="index-en.html">Netskope Help</a></li><li class="breadcrumb-link"><a href="traffic-management.html">Traffic Management</a></li><li class="breadcrumb-link"><a href="netskope-client-105999.html">Netskope Client</a></li><li class="breadcrumb-node">Netskope Client Network Configuration</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="netskope-client-admin-configuration.html#idp205713">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="netskope-client-network-configuration.html#UUID-a2a0293d-39ce-4363-692c-821e3af7357b_section-idm231801459591667">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-dc86da91-b28b-d7e4-2e22-0f8fa5bec723" data-permalink="netskope-client-network-configuration.html" data-topic-level="1" data-relative-prefix="" data-time-modified="December 16, 2020" data-publication-date="" id="UUID-a2a0293d-39ce-4363-692c-821e3af7357b"><div class="titlepage"><div><div class="title"><h4 class="title">Netskope Client Network Configuration</h4></div></div></div><p>For the normal functioning of the client, a set of outbound domains and port 443 must be allowed in the user's firewall or proxy. The following table describes the list of domains and ports used by the client.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>Netskope recommends the use of domain names instead of IP addresses to configure firewall or proxy rules <span class="phrase">allowlist</span>.</p><p>If your environment uses firewall or proxy, ensure that you process the backup gateway URL in the same manner as the primary gateway URL. The backup gateway URL is suffixed with <code class="literal">gateway-backup</code> to the primary URL.</p></div><div class="table table-responsive" id="idp205890"><div class="table-title">Table 5. DNS and Proxy Settings</div><div class="table table-responsive-contents"><table class="table frame-box rules-rows"><thead><tr><th class="th" data-priority="1"><p>Domain</p></th><th class="th" data-priority="1"><p>Purpose</p></th></tr></thead><tbody><tr><td class="td"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="bold bold"><strong>Primary</strong></span>: <code class="literal">gateway-&lt;tenant_hostname&gt;. .goskope.com</code></p></li><li class="listitem"><p><span class="bold bold"><strong>Backup</strong></span>: <code class="literal">gateway-backup-&lt;tenant_hostname&gt;.goskope.com</code></p></li></ul></div></td><td class="td"><p>For client data plane connectivity. This domain needs to be SSL <span class="phrase">allowlisted</span> on the egress firewall if SSL interception is enabled. Also, do the same for <code class="code">gateway-backup-{tenant_hostname}.goskope.com</code></p></td></tr><tr><td class="td"><p><code class="literal">addon-<span class="emphasis"><em>&lt;tenant_hostname&gt;</em></span> .goskope.com</code></p></td><td class="td"><p>For downloading configuration files.</p></td></tr><tr><td class="td"><p><code class="literal">download-<span class="emphasis"><em>&lt;tenant_hostname&gt;</em></span> .goskope.com</code></p></td><td class="td"><p>For downloading client package updates.</p></td></tr><tr><td class="td"><p><code class="literal">achecker-<span class="emphasis"><em>&lt;tenant_hostname&gt;</em></span> .goskope.com</code></p></td><td class="td"><p>For client enforcement. This is required to enforce the end-user to install the Client on their device. If the Client is not installed in the users' device, access to an app or domain specified in the steering configuration is restricted and the user is redirected to a browser page with instructions to install the Client.</p></td></tr><tr><td class="td"><p><code class="literal">sfchecker-<span class="emphasis"><em>&lt;tenant_hostname&gt;</em></span> .goskope.com</code></p></td><td class="td"><p>To verify secure forwarder connection.</p></td></tr></tbody></table></div></div><br class="table table-responsive-break"></br><div dir="ltr" class="note"><h3 class="title">Note</h3><p>For international deployments, use <code class="literal"><span class="emphasis"><em>&lt;tenant_hostname&gt;</em></span>.eu.goskope.com</code> or <code class="literal"><span class="emphasis"><em>&lt;tenant_hostname&gt;</em></span>.de.goskope.com</code>..</p></div><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-a2a0293d-39ce-4363-692c-821e3af7357b_section-idm231801459591667"><div class="titlepage"><div><div class="title"><h5 class="title">Netskope Client PoP Selection</h5></div></div></div><p>The Netskope Client resolves the IP Address of the Netskope gateway (<span class="emphasis"><em>gateway-tenant_hostname</em></span>.goskope.com) using DNS over HTTPS to be able to allow the user to connect to the best possible POP based on the users’ location. In the event that ECS and DNS over HTTPS fails, the Client will resolve the IP Address using LDNS.</p></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-a2a0293d-39ce-4363-692c-821e3af7357b_section-5de9159e84e7c-idm45502166012256"><div class="titlepage"><div><div class="title"><h5 class="title">Netskope Client in a Non-Proxy Environment.</h5></div></div></div><p>Here are the packet flow details of how the cloud app traffic is intercepted and sent through the tunnel when the client is installed in a non-proxy environment:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>The Client establishes the SSL tunnel between the Client and the Netskope gateway.</p></li><li class="listitem"><p>Browser/App sends a DNS request for a managed cloud service (<span class="emphasis"><em>For example: Box.com</em></span>)</p></li><li class="listitem"><p>Browser/App receives a DNS response (<span class="emphasis"><em>For example: 74.112.184.73</em></span>)</p></li><li class="listitem"><p>The Client driver captures DNS response and creates a map of domain and IP (<span class="emphasis"><em>For example: Box.com = 74.112.184.73 for cloud app domains</em></span>)</p></li><li class="listitem"><p>Browser/App sends packets to Box.com (<span class="emphasis"><em>For example: DST IP 74.112.184.73</em></span>)</p></li><li class="listitem"><p>Client tunnels Box traffic (<span class="emphasis"><em>For example: DST IP 74.112.184.73</em></span>) through the SSL tunnel.</p></li></ol></div></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-a2a0293d-39ce-4363-692c-821e3af7357b_section-5de9f9fd074f2-idm45502165465072"><div class="titlepage"><div><div class="title"><h5 class="title">Netskope Client in an Explicit Proxy Environment</h5></div></div></div><p>Here are the packet flow details of how the Cloud app traffic is intercepted and sent through the tunnel when the client is installed in an explicit proxy environment:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>The Client establishes the SSL tunnel between the Client and the Netskope gateway. The client will first try to connect directly through default gateway to establish the SSL tunnel. If this is blocked, then it looks for system proxy settings, such as PAC (proxy auto-config) files, WPAD (Web Proxy Auto-Discovery Protocol), and manual configuration. The client uses the proxy settings and connects to the Netskope gateway via HTTP Connect. </p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>The Netskope gateway should be SSL <span class="phrase">allowlisted</span> if the proxy is configured for SSL decryption. If your environment uses firewall or proxy, ensure that you process the backup gateway URL in the same manner as the primary gateway URL. The backup gateway URL is suffixed with <code class="literal">gateway-back</code> to your primary URL.</p></div></li><li class="listitem"><p>The browser or native app reads the proxy settings (PAC file, explicit proxy setting) and opens a connection to an explicit proxy server, for example: <span class="emphasis"><em>ep.customer.com</em></span>.</p></li><li class="listitem"><p>The client parses the initial header of the connection.</p></li><li class="listitem"><p>If the initial header indicates the connection is a SaaS app, then the client sends the entire payload through that SSL tunnel to the Netskope gateway.</p></li><li class="listitem"><p>If the initial header does not indicate SaaS app HTTPS access, the TCP proxy opens a connection to and forwards the entire payload to the explicit proxy server. For example:  <span class="emphasis"><em>ep.customer.com</em></span>.</p></li></ol></div><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-a2a0293d-39ce-4363-692c-821e3af7357b_section-idm4480047829008031531055191894"><div class="titlepage"><div><div class="title"><h6 class="title">Netskope Client log messages with On-prem Proxy</h6></div></div></div><p><span class="bold bold"><strong>Steering traffic flow and Log message</strong></span>: With on-prem proxy, the Netskope Client monitors for HTTP CONNECT requests. It checks for the domain name in these requests against the managed domain list. If the name matches then it will reconstruct the TCP SYN packet and send it through the Netskope Tunnel and at the same time it will send TCP RST to on-prem proxy, and it will take control of that connection. After the TCP 3-way handshake with Netskope proxy, it sends the HTTP CONNECT request and the flow continues with Netskope proxy. Since TCP flow will be with destination IP of on-prem proxy when Netskope Client logs the message, it will show destination IP as on-prem Proxy and the domain name will be the managed domain.</p><p>Assuming on-prem Proxy IP is 10.10.10.11 and Proxy port is 8080 and the managed domain is www.box.com then you will see the log line as below:</p><pre class="programlisting">2019/10/18 17:16:11.282 stAgentSvc pfbc t296c 4 tunnel.cpp:618 nsTunnel TLS [sessId 1]Tunneling flow from addr: 192.168.13.40:49614, process: chrome.exe to host: <span class="bold bold"><strong>www.box.com</strong></span>,addr: <span class="bold bold"><strong>10.10.10.11:8080</strong></span></pre></section></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-a2a0293d-39ce-4363-692c-821e3af7357b">Netskope Client Network Configuration</a></li><li><a href="#UUID-a2a0293d-39ce-4363-692c-821e3af7357b_section-idm231801459591667">Netskope Client PoP Selection</a></li><li><a href="#UUID-a2a0293d-39ce-4363-692c-821e3af7357b_section-5de9159e84e7c-idm45502166012256">Netskope Client in a Non-Proxy Environment.</a></li><li><a href="#UUID-a2a0293d-39ce-4363-692c-821e3af7357b_section-5de9f9fd074f2-idm45502165465072">Netskope Client in an Explicit Proxy Environment</a><ul class="nav"><li><a href="#UUID-a2a0293d-39ce-4363-692c-821e3af7357b_section-idm4480047829008031531055191894">Netskope Client log messages with On-prem Proxy</a></li></ul></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div id="email-feedback" class="no-voting toggle-feedback"><p><a href="mailto:techpubs@netskope.com?subject=Feedback%20for%20help%20topic%20%22Netskope%20Client%20Network%20Configuration%22&amp;body=%0A%09%09%09%09%0A%09%09%09%09%0A%09%09%09%09_______________________%0A%09%09%09%09%0A%09%09%09Please%20add%20your%20feedback%20above%20for%20topic%20%22Netskope%20Client%20Network%20Configuration%22%20in%20the%20publication%20%22Netskope%20Help%22."><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon"></i>Would you like to provide feedback? Just click here to suggest edits.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="netskope-client-admin-configuration.html#idp205713">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="netskope-client-network-configuration.html#UUID-a2a0293d-39ce-4363-692c-821e3af7357b_section-idm231801459591667">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2021 Netskope </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">December 16, 2020</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
