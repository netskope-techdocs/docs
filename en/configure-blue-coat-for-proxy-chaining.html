<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				
			
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Configure Blue Coat for Proxy Chaining</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/rwd-table.min.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/layout-custom-style.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/rwd-table.min.js" type="text/javascript"></script><script src="../js/responsive-tables.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/lunr.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="js/data.js" type="text/javascript"></script><script src="../js/search.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta name="generator" content="Paligo"></meta><link rel="prev" href="configure-forcepoint-for-proxy-chaining.html#idp215515" title="Configure the Certificate Trust Chain"></link><link rel="next" href="provisioning-and-authentication.html" title="Provisioning and Authentication"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script async="" src="https://www.googletagmanager.com/gtag/js?id=256425220"></script><script type="text/javascript">var propertyid = '256425220';

						window.dataLayer = window.dataLayer || [];
						function gtag(){dataLayer.push(arguments)};
						gtag('js', new Date());
						
						gtag('config', propertyid);
					</script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><h1 class="publication-title">Netskope Help</h1><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print print-icon"><a onclick="window.print();return false;"><i class="fa fa-print" aria-hidden="true"><span class="print-text">print</span></i></a></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="index-en.html">Netskope Help</a></li><li class="breadcrumb-link"><a href="integrations.html">Integrations</a></li><li class="breadcrumb-link"><a href="saml-proxy.html">SAML Proxy</a></li><li class="breadcrumb-node">Configure Blue Coat for Proxy Chaining</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="configure-forcepoint-for-proxy-chaining.html#idp215515">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="provisioning-and-authentication.html">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-bbc86545-230a-e9ff-085a-22c1740c57ca" data-permalink="configure-blue-coat-for-proxy-chaining.html" data-topic-level="1" data-relative-prefix="" data-time-modified="April 11, 2020" data-publication-date="" id="UUID-6b69625f-035e-da21-edc0-3311d10fb40d"><div class="titlepage"><div><div class="title"><h4 class="title">Configure Blue Coat for Proxy Chaining</h4></div></div></div><p>This document describes how to configure Blue Coat ProxySG to forward traffic for SaaS apps to the Netskope cloud proxy. </p><p>Netskope’s Cloud proxy does not require configuration in the Netskope UI, but it is not enabled by default. Tenant-specific access control rules are in place to maintain the security of the solution. Please submit a Customer Support ticket so that we can enable it, and be prepared to provide the public IP addresses of the proxies in order to whitelist them. Traffic is not allowed from unknown sources.</p><p>Before starting, you need to get the Netskope Root and CA certificates, and also need to get the list of URLs to be used in Blue Coat to steer the managed apps. These items are available in the Netskope UI.</p><p>To get the Netskope certificates for importing into Blue Coat, go to <span class="bold bold"><strong>Settings &gt; Manage &gt; Certificates &gt; Signing CA</strong></span>.  Scroll down where you can download the root and intermediate certificates (which are needed in step 1 below).</p><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:405px;
                            "><tr><td style="padding:0;"><img src="image/uuid-abf5fb55-05d9-d91f-4e82-6a2fbea0fc1e-en.png" style="max-width: 405px; " alt="DownloadNetskopeCertificates.png"></img></td></tr></table></div><p>To get the list of URLs, go to <span class="bold bold"><strong>Settings &gt; <span class="phrase">Security Cloud Platform</span> &gt; Steering Configuration</strong></span> and select a Steering Configuration to use. Select <span class="bold bold"><strong>Desktop Domains</strong></span> on the Download Configuration dropdown list.</p><p>This generates the list of URLs for you to use in the Blue Coat configuration below (step 4).</p><p>Once you have these items, you are ready to configure Blue Coat for proxy chaining.</p><p>To configure Blue Coat:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Import the certificates from Netskope into the Blue Coat ProxySG CA certificate store (<span class="strong strong"><strong>Configuration tab &gt; SSL &gt; CA Certificates &gt; CA Certificates tab &gt; Import</strong></span>).</p><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:432px;
                            "><tr><td style="padding:0;"><img src="image/uuid-8f2c004d-c308-2e55-6693-57389c206afe-en.jpg" style="max-width: 432px; " alt="image3.jpeg"></img></td></tr></table></div></li><li class="listitem"><p>If applicable, import the appropriate CA certificate list. For example "browser-trusted" (<span class="strong strong"><strong>Configuration tab &gt; SSL &gt; CA Certificates &gt;CA Certificate List tab &gt; Edit</strong></span>).</p><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:432px;
                            "><tr><td style="padding:0;"><img src="image/uuid-43a5da22-18b3-b000-2c82-a25b0798f5bb-en.jpg" style="max-width: 432px; " alt="image4.jpeg"></img></td></tr></table></div></li><li class="listitem"><p>Define the host and port for the upstream proxy that will act as the forwarding host. An example is shown below.(<span class="strong strong"><strong>Configuration tab &gt; Forwarding &gt; Forwarding Hosts &gt; Forwarding Hosts tab &gt; New)</strong></span>). The proxy hostname should be <code class="literal">pxc-<span class="emphasis"><em>&lt;tenant hostname&gt;</em></span>.goskope.com</code>. This is the minimum required configuration.</p><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:432px;
                            "><tr><td style="padding:0;"><img src="image/uuid-79d66537-5b09-5fce-0175-bb1da826514b-en.jpg" style="max-width: 432px; " alt="image5.jpeg"></img></td></tr></table></div><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:432px;
                            "><tr><td style="padding:0;"><img src="image/uuid-ee9e0045-ba72-c14c-25ae-d171a25b388d-en.jpg" style="max-width: 432px; " alt="image6.jpeg"></img></td></tr></table></div></li><li class="listitem"><p>Create a category object in the Blue Coat ProxySG policies that defines the list of SaaS app domains for the traffic that must be forwarded (<span class="strong strong"><strong>Configuration tab &gt; Policy &gt; Visual Policy Manager &gt; Configuration &gt; Edit categories ...</strong></span>).</p><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:432px;
                            "><tr><td style="padding:0;"><img src="image/uuid-adf05091-70bf-90ae-bca8-41417310b818-en.jpg" style="max-width: 432px; " alt="image7.jpeg"></img></td></tr></table></div><p>Use the Desktop Domain list you got from the Netskope UI. As this managed list is modified, a new list needs to be added to the category object.</p></li><li class="listitem"><p>Create a Forwarding layer in the Blue Coat ProxySG policies and create a rule which sets the destination to a server URL category object encompassing the list of SaaS app domains obtained previously (<span class="strong strong"><strong>Configuration tab &gt; Policy &gt; Visual Policy Manager &gt; Forwarding layer tab</strong></span>), and right-click on the object in the Destination column corresponding to rule. Click on <span class="strong strong"><strong>Set &gt; New &gt; Server URL Category</strong></span>.</p><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:432px;
                            "><tr><td style="padding:0;"><img src="image/uuid-f1d5bbc7-f331-4edc-b5f4-72912144f173-en.jpg" style="max-width: 432px; " alt="image8.jpeg"></img></td></tr></table></div><p>The action is set to a forwarding object containing the forwarding host defined previously (<span class="strong strong"><strong>Configuration tab &gt; Policy &gt; Visual Policy Manager &gt; Forwarding layer tab</strong></span>). Right click on an object in the Action column corresponding to rule and click <span class="strong strong"><strong>Set &gt; New &gt; Select Forwarding</strong></span>. The Service Column should be set to <code class="literal">ALL HTTPS</code> since we are only interested in HTTPS Saas traffic.</p><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:432px;
                            "><tr><td style="padding:0;"><img src="image/uuid-e41fb39b-9dab-1527-76bc-c2f71217ac54-en.jpg" style="max-width: 432px; " alt="image9.jpeg"></img></td></tr></table></div></li><li class="listitem"><p>If not already done, create a SSL Intercept layer in the Blue Coat ProxySG policies and create a rule to enable SSL interception (<span class="strong strong"><strong>Configuration tab &gt; Policy &gt; Visual Policy Manager &gt; SSL intercept layer tab</strong></span>). Right-click on an object in the Action column corresponding to a rule and click <span class="strong strong"><strong>New &gt; Enable SSL Interception</strong></span>. This layer is needed to insert the identity and IP address header in the request (this is described later on).</p><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:432px;
                            "><tr><td style="padding:0;"><img src="image/uuid-de885b50-b44d-d9b9-c7bb-e9ad403f3da7-en.jpg" style="max-width: 432px; " alt="image10.jpeg"></img></td></tr></table></div><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:432px;
                            "><tr><td style="padding:0;"><img src="image/uuid-328aed3e-3f01-e599-3576-c68c753362e7-en.jpg" style="max-width: 432px; " alt="image11.jpeg"></img></td></tr></table></div></li><li class="listitem"><p>Create a Web Access layer in the Blue Coat ProxySG policies and create a rule containing a combined action object. The destination is set to a request URL category destination object containing the SaaS app domains defined previously in the category object (<span class="strong strong"><strong>Configuration tab &gt; Policy &gt; Visual Policy Manager &gt; Web access layer tab</strong></span>), and then right-click on the object in the Destination column corresponding to the rule (<span class="strong strong"><strong>New &gt; Request URL category</strong></span>).</p><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:432px;
                            "><tr><td style="padding:0;"><img src="image/uuid-ff0b23cb-f319-b284-c76c-f9c6c0551141-en.jpg" style="max-width: 432px; " alt="image12.jpeg"></img></td></tr></table></div><p>The combined action object consists of two so-called control request header objects. One control request header object sets the <span class="emphasis"><em>X-Forwarded-For</em></span> header to the client IP address and another control request object sets the <span class="emphasis"><em>X-Authenticated-User</em></span> header to the authentication credentials. The Service column is set to the Health status of the forward chain proxy. This is to ensure that the headers are inserted only if the request is being forwarded to the Netskope Cloud proxy.</p><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:432px;
                            "><tr><td style="padding:0;"><img src="image/uuid-f1d5bbc7-f331-4edc-b5f4-72912144f173-en.jpg" style="max-width: 432px; " alt="image8.jpeg"></img></td></tr></table></div><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:432px;
                            "><tr><td style="padding:0;"><img src="image/uuid-3589cf0d-d913-7d2e-27f9-cb78d5688f25-en.jpg" style="max-width: 432px; " alt="image13.jpeg"></img></td></tr></table></div><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:432px;
                            "><tr><td style="padding:0;"><img src="image/uuid-fc1530f4-0a3a-e127-3661-2ef6e542ceb4-en.jpg" style="max-width: 432px; " alt="image14.jpeg"></img></td></tr></table></div><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:432px;
                            "><tr><td style="padding:0;"><img src="image/uuid-32216565-a448-bbdd-f23d-9870420f34bc-en.jpg" style="max-width: 432px; " alt="image15.jpeg"></img></td></tr></table></div><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:432px;
                            "><tr><td style="padding:0;"><img src="image/uuid-5dfe796f-495e-e350-1ec1-6f8c3b608138-en.jpg" style="max-width: 432px; " alt="image16.jpeg"></img></td></tr></table></div><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:432px;
                            "><tr><td style="padding:0;"><img src="image/uuid-4b9a4159-69ae-625a-95ca-af157b0a8249-en.jpg" style="max-width: 432px; " alt="image17.jpeg"></img></td></tr></table></div></li><li class="listitem"><p>To create a Health Status object, click <span class="bold bold"><strong>New</strong></span> and then select <span class="bold bold"><strong>Health Status</strong></span>. Enter a Health Status name, and click <span class="bold bold"><strong>OK</strong></span>.</p><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:330px;
                            "><tr><td style="padding:0;"><img src="image/uuid-c7a1ebdf-deac-d44f-2170-88818bdf11de-en.jpg" style="max-width: 330px; " alt="image18.jpeg"></img></td></tr></table></div><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:320px;
                            "><tr><td style="padding:0;"><img src="image/uuid-9c16e98e-d3d4-64b2-8fdf-0c722e2deefb-en.jpg" style="max-width: 320px; " alt="image19.jpeg"></img></td></tr></table></div><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:331px;
                            "><tr><td style="padding:0;"><img src="image/uuid-b44420c1-b3b2-77a3-6cfd-3fd0e4822d99-en.jpg" style="max-width: 331px; " alt="image20.jpeg"></img></td></tr></table></div></li><li class="listitem"><p>Apply the policy.</p></li></ol></div></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div id="email-feedback" class="no-voting toggle-feedback"><p><a href="mailto:techpubs@netskope.com?subject=Feedback%20for%20help%20topic%20%22Configure%20Blue%20Coat%20for%20Proxy%20Chaining%22&amp;body=%0A%09%09%09%09%0A%09%09%09%09%0A%09%09%09%09_______________________%0A%09%09%09%09%0A%09%09%09Please%20add%20your%20feedback%20above%20for%20topic%20%22Configure%20Blue%20Coat%20for%20Proxy%20Chaining%22%20in%20the%20publication%20%22Netskope%20Help%22."><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon"></i>Would you like to provide feedback? Just click here to suggest edits.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="configure-forcepoint-for-proxy-chaining.html#idp215515">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="provisioning-and-authentication.html">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2021 Netskope </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">April 11, 2020</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
