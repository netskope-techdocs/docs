<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				
			
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Configure AWS for Continuous Security Assessment</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/rwd-table.min.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/layout-custom-style.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/rwd-table.min.js" type="text/javascript"></script><script src="../js/responsive-tables.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/lunr.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="js/data.js" type="text/javascript"></script><script src="../js/search.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta name="generator" content="Paligo"></meta><link rel="prev" href="setting-up-aws-instances-using-old-ui.html" title="Setting Up AWS Instances using Old UI"></link><link rel="next" href="configure-aws-for-continuous-security-assessment.html#idm45547859226016" title="Create an AWS Instance in API-enabled Protection"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZT8KHXMB6T"></script><script type="text/javascript">var propertyid = 'G-ZT8KHXMB6T';

						window.dataLayer = window.dataLayer || [];
						function gtag(){dataLayer.push(arguments)};
						gtag('js', new Date());
						
						gtag('config', propertyid);
					</script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><h1 class="publication-title">Netskope Help</h1><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print print-icon"><a onclick="window.print();return false;"><i class="fa fa-print" aria-hidden="true"><span class="print-text">print</span></i></a></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="index-en.html">Netskope Help</a></li><li class="breadcrumb-link"><a href="network-security.html">Network Security</a></li><li class="breadcrumb-link"><a href="netskope-public-cloud-security.html"><span class="phrase">Netskope Public Cloud Security</span></a></li><li class="breadcrumb-link"><a href="continuous-security-assessment-for-amazon-web-services.html">Continuous Security Assessment for Amazon Web Services</a></li><li class="breadcrumb-link"><a href="setting-up-aws-instances-using-old-ui.html">Setting Up AWS Instances using Old UI</a></li><li class="breadcrumb-node">Configure AWS for Continuous Security Assessment</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="setting-up-aws-instances-using-old-ui.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="configure-aws-for-continuous-security-assessment.html#idm45547859226016">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-5701cbb9-fe6f-2f66-8ebf-6957df505159" data-permalink="configure-aws-for-continuous-security-assessment.html" data-topic-level="1" data-relative-prefix="" data-time-modified="May 28, 2020" data-publication-date="" id="UUID-54b7ce96-11d9-6562-3299-4377b02bb884"><div class="titlepage"><div><div class="title"><h6 class="title">Configure AWS for Continuous Security Assessment</h6></div></div></div><div dir="ltr" class="tip"><h3 class="title">Tip</h3><p>If you have already set up an instance for CloudTrail and want to scan an S3 bucket or Security Assessment, simply attach the permissions required for CloudTrail or Security Assessment to the existing role, and then enable the CloudTrail or Security Assessment check-boxes in the Netskope UI.</p></div><div dir="ltr" class="note"><h3 class="title">Note</h3><p>Netskope normalizes the term "Account" to help with cross CSP summaries. Netskope normalized “Account” field maps to AWS Account.</p></div><p>To configure AWS for continuous security assessment:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Log in to the Netskope tenant UI: <code class="literal">https://<span class="emphasis"><em>&lt;tenant hostname&gt;</em></span>.goskope.com</code> and navigate to <span class="bold bold"><strong>Settings &gt; <span class="phrase">API-enabled Protection</span> &gt; Cloud Infrastructure</strong></span>.</p></li><li class="listitem"><p>Select the <span class="bold bold"><strong>AWS</strong></span> icon, and then click <span class="bold bold"><strong>SETUP</strong></span>.</p><p>The <span class="bold bold"><strong>New Setup</strong></span> window opens.</p></li><li class="listitem"><p>Under <span class="bold bold"><strong>AWS Role</strong></span>, note the <span class="bold bold"><strong>Netskope Account ID</strong></span> and <span class="bold bold"><strong>Netskope External ID</strong></span>. You need to enter these into the AWS console in steps 8-9.</p></li><li class="listitem"><p>Log in to <a class="link" href="https://aws.amazon.com/console/" target="_blank" rel="noopener">AWS console</a>.</p></li><li class="listitem"><p>Navigate to <span class="bold bold"><strong>Services &gt; Security, Identity &amp; Compliance</strong></span> and click <span class="bold bold"><strong>IAM</strong></span>.</p></li><li class="listitem"><p>In the left navigation bar, click <span class="bold bold"><strong>Roles</strong></span> and then <span class="bold bold"><strong>Create role</strong></span>.</p></li><li class="listitem"><p>In the <span class="bold bold"><strong>Select type of trusted entity</strong></span> page, select <span class="bold bold"><strong>Another AWS account</strong></span>.</p></li><li class="listitem"><p>Enter the account ID you noted from the Netskope UI in step 3.</p></li><li class="listitem"><p>Select the <span class="bold bold"><strong>Require external ID</strong></span> checkbox and enter the external ID you noted from the Netskope UI in step 3.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>Leave the <span class="bold bold"><strong>Require MFA</strong></span> checkbox unchecked.</p></div></li><li class="listitem"><p>Click <span class="bold bold"><strong>Next: Permissions</strong></span>.</p></li><li class="listitem" id="UUID-54b7ce96-11d9-6562-3299-4377b02bb884_listitem-idm43116640670348"><p>In the <span class="bold bold"><strong>Attach permissions policies</strong></span> page, add the <span class="bold bold"><strong>SecurityAudit</strong></span> policy and click <span class="bold bold"><strong>Next: Tags</strong></span>.</p></li><li class="listitem" id="UUID-54b7ce96-11d9-6562-3299-4377b02bb884_listitem-idm43116640710454"><p>In the <span class="bold bold"><strong>Add tags (optional)</strong></span> page, do not add any IAM tags and click <span class="bold bold"><strong>Next: Review</strong></span>.</p></li><li class="listitem"><p>In the <span class="bold bold"><strong>Review</strong></span> page, enter a role name and then click <span class="bold bold"><strong>Create role</strong></span>.</p></li><li class="listitem"><p>After creating a role, you need to attach a policy to it. In the <span class="bold bold"><strong>Roles</strong></span> page, click on the role you just created.</p></li><li class="listitem"><p>On the <span class="bold bold"><strong>Permissions</strong></span> tab, click <span class="bold bold"><strong>+ Add inline policy</strong></span>. In the <span class="bold bold"><strong>Create Policy</strong></span> page, enter the following details:</p><div class="orderedlist" id="UUID-54b7ce96-11d9-6562-3299-4377b02bb884_orderedlist-idm43121835435468"><ol class="orderedlist" type="a"><li class="listitem"><p>From the <span class="bold bold"><strong>Service</strong></span> drop-down list, select <span class="bold bold"><strong>DynamoDB</strong></span>.</p></li><li class="listitem"><p>From the <span class="bold bold"><strong>Actions</strong></span> drop-down list, select <span class="bold bold"><strong>ListTagsOfResource</strong></span>.</p></li><li class="listitem"><p>In the <span class="bold bold"><strong>Resources</strong></span> field, select <span class="bold bold"><strong>All resources</strong></span>.</p></li><li class="listitem"><p>Click <span class="bold bold"><strong>Add additional permissions</strong></span>.</p></li><li class="listitem"><p>From the <span class="bold bold"><strong>Services</strong></span> drop-down list, select <span class="bold bold"><strong>SES</strong></span>.</p></li><li class="listitem"><p>From the Actions drop-down list, select <span class="bold bold"><strong>ListIdentityPolicies</strong></span>.</p></li><li class="listitem"><p>Click <span class="bold bold"><strong>Add additional permissions</strong></span>.</p></li><li class="listitem"><p>From the <span class="bold bold"><strong>Service</strong></span> drop-down list, select <span class="bold bold"><strong>Lambda</strong></span>.</p></li><li class="listitem"><p>From the <span class="bold bold"><strong>Actions</strong></span> drop-down list, select all actions starting with <span class="bold bold"><strong>Get</strong></span> (8 actions) and <span class="bold bold"><strong>List</strong></span> (7 actions) strings.</p></li><li class="listitem"><p>In the <span class="bold bold"><strong>Resources</strong></span> field, select <span class="bold bold"><strong>All resources</strong></span>.</p></li><li class="listitem"><p>Click <span class="bold bold"><strong>Add additional permissions</strong></span>.</p></li><li class="listitem"><p>From the <span class="bold bold"><strong>Service</strong></span> drop-down list, select <span class="bold bold"><strong>S3</strong></span>.</p></li><li class="listitem"><p>From the <span class="bold bold"><strong>Actions</strong></span> drop-down list, select <span class="bold bold"><strong>GetBucketLocation</strong></span>, <span class="bold bold"><strong>GetObject</strong></span>, <span class="bold bold"><strong>GetObjectAcl</strong></span>, <span class="bold bold"><strong>ListAllMyBuckets</strong></span>, and <span class="bold bold"><strong>ListBucket</strong></span>.</p></li><li class="listitem"><p>In the <span class="bold bold"><strong>Resources</strong></span> field, select <span class="bold bold"><strong>All resources</strong></span>.</p></li><li class="listitem"><p>From the <span class="bold bold"><strong>Service</strong></span> drop-down list, select <span class="bold bold"><strong>SQS</strong></span>.</p></li><li class="listitem"><p>From the <span class="bold bold"><strong>Actions</strong></span> drop-down list, select <span class="bold bold"><strong>ListDeadLetterSourceQueues</strong></span>, <span class="bold bold"><strong>ListQueues</strong></span>, <span class="bold bold"><strong>GetQueueAttributes</strong></span>, and <span class="bold bold"><strong>GetQueueUrl</strong></span>.</p></li><li class="listitem"><p>In the <span class="bold bold"><strong>Resources</strong></span> field, select <span class="bold bold"><strong>All resources</strong></span>.</p></li></ol></div><p>The inline policy definition should look like this in JSON format. You can click the <span class="bold bold"><strong>JSON</strong></span> tab to view the policy script.</p><pre class="programlisting">{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "VisualEditor0",
            "Effect": "Allow",
            "Action": [
                "lambda:ListVersionsByFunction",
                "lambda:GetLayerVersion",
                "dynamodb:ListTagsOfResource",
                "s3:ListBucket",
                "lambda:GetAccountSettings",
                "lambda:GetFunctionConfiguration",
                "lambda:GetLayerVersionPolicy",
                "s3:GetObjectAcl",
                "lambda:ListLayerVersions",
                "lambda:ListLayers",
                "lambda:GetAlias",
                "sqs:ListQueues",
                "sqs:GetQueueUrl",
                "lambda:ListFunctions",
                "lambda:GetEventSourceMapping",
                "lambda:GetFunction",
                "lambda:ListAliases",
                "sqs:GetQueueAttributes",
                "s3:GetBucketAcl",
                "ses:ListIdentityPolicies",
                "s3:GetObject",
                "sqs:ListDeadLetterSourceQueues",
                "s3:ListAllMyBuckets",
                "lambda:ListEventSourceMappings",
                "s3:GetBucketLocation",
                "lambda:GetPolicy"
            ],
            "Resource": "*"
        }
    ]
}</pre></li><li class="listitem"><p>Click <span class="bold bold"><strong>Review policy</strong></span>.</p></li><li class="listitem"><p>Enter the name of the policy and click <span class="bold bold"><strong>Create Policy</strong></span>.</p></li><li class="listitem"><p>In the <span class="bold bold"><strong>Summary</strong></span> page, copy the <span class="bold bold"><strong>Role ARN</strong></span> value. You need to enter this in the Netskope UI when you create your AWS instance.</p></li></ol></div><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="idm45547859226016"><div class="titlepage"><div><div class="title"><h6 class="title">Create an AWS Instance in <span class="phrase">API-enabled Protection</span></h6></div></div></div><p>To create an AWS instance in <span class="phrase">API-enabled Protection</span>:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Log in to the Netskope tenant UI.</p></li><li class="listitem"><p>Navigate to <span class="bold bold"><strong>Settings &gt; <span class="phrase">API-enabled Protection</span> &gt; Cloud Infrastructure &gt; AWS &gt; SETUP</strong></span>.</p></li><li class="listitem"><p>The <span class="bold bold"><strong>New Setup</strong></span> window opens. Enter the following parameters:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>AWS Account Name: Enter a unique name of the AWS account.</p></li><li class="listitem"><p>Admin email: Enter the email address to receive email notification when a policy is triggered.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>You can set a notification on the <span class="bold bold"><strong>Policies &gt; <span class="phrase">API-enabled Protection</span> &gt; NEW POLICY</strong></span> wizard page.</p></div></li><li class="listitem"><p>Connection Type:</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>Few of the instance type options may be disabled. Contact your Netskope sales representative for additional information.</p></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Security Assessment: Select this option to assess your AWS resources. Also, you have the option to run the policy at intervals (30 minutes, 60 minutes, 2 hours, 6 hours, and 24 hours).</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>Netskope recommends setting the interval to 60 minutes or more.</p></div></li></ul></div></li><li class="listitem"><p>Role: Enter the AWS resource name of IAM role you copied in step 19.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>CloudTrail name and region are not required for Security Assessment.</p></div></li></ul></div></li><li class="listitem"><p>Click <span class="bold bold"><strong>Save</strong></span>, then click <span class="bold bold"><strong>Grant Access</strong></span> for the AWS instance you just created.</p></li></ol></div><p>Refresh your browser, and you should see a green check icon next to the instance name. Navigate to the <span class="bold bold"><strong>Policies &gt; Security Assessment</strong></span> page to create a security assessment policy, profile, and rule. Once you create a policy, Netskope accesses and analyzes the posture of the AWS resources and alerts the administrator for risk and possible remediation. You can view the AWS security assessment dashboard by navigating to the <span class="bold bold"><strong>Cloud Infrastructure</strong></span> page.</p></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-54b7ce96-11d9-6562-3299-4377b02bb884">Configure AWS for Continuous Security Assessment</a></li><li><a href="#idm45547859226016">Create an AWS Instance in API-enabled Protection</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div id="email-feedback" class="no-voting toggle-feedback"><p><a href="mailto:techpubs@netskope.com?subject=Feedback%20for%20help%20topic%20%22Configure%20AWS%20for%20Continuous%20Security%20Assessment%22&amp;body=%0A%09%09%09%09%0A%09%09%09%09%0A%09%09%09%09_______________________%0A%09%09%09%09%0A%09%09%09Please%20add%20your%20feedback%20above%20for%20topic%20%22Configure%20AWS%20for%20Continuous%20Security%20Assessment%22%20in%20the%20publication%20%22Netskope%20Help%22."><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon"></i>Would you like to provide feedback? Just click here to suggest edits.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="setting-up-aws-instances-using-old-ui.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="configure-aws-for-continuous-security-assessment.html#idm45547859226016">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2021 Netskope </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">May 28, 2020</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
