<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				
			
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>IPSec</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/rwd-table.min.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/layout-custom-style.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/rwd-table.min.js" type="text/javascript"></script><script src="../js/responsive-tables.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/lunr.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="js/data.js" type="text/javascript"></script><script src="../js/search.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta name="generator" content="Paligo"></meta><link rel="prev" href="configure-custom-applications.html#UUID-e6c6fd77-9f1e-8176-a604-a71a54517be8_N1562703095129" title="Add a Custom Connector"></link><link rel="next" href="ipsec-129296.html#UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_N1571087759679" title="Prerequisites"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZT8KHXMB6T"></script><script type="text/javascript">var propertyid = 'G-ZT8KHXMB6T';

						window.dataLayer = window.dataLayer || [];
						function gtag(){dataLayer.push(arguments)};
						gtag('js', new Date());
						
						gtag('config', propertyid);
					</script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><h1 class="publication-title">Netskope Help</h1><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print print-icon"><a onclick="window.print();return false;"><i class="fa fa-print" aria-hidden="true"><span class="print-text">print</span></i></a></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="index-en.html">Netskope Help</a></li><li class="breadcrumb-link"><a href="traffic-management.html">Traffic Management</a></li><li class="breadcrumb-link"><a href="traffic-steering.html">Traffic Steering</a></li><li class="breadcrumb-node">IPSec</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="configure-custom-applications.html#UUID-e6c6fd77-9f1e-8176-a604-a71a54517be8_N1562703095129">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="ipsec-129296.html#UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_N1571087759679">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-d23e0072-a5f4-f0cd-6259-24a35cd2e627" data-permalink="ipsec-129296.html" data-topic-level="1" data-relative-prefix="" data-time-modified="April 22, 2021" data-publication-date="" id="UUID-b6f31806-0d15-5cbb-d63b-c7358843585d"><div class="titlepage"><div><div class="title"><h4 class="title">IPSec</h4></div></div></div><p>Internet Protocol  Security (IPSec) is a tunneling protocol for authenticating and encrypting packets inside a transport protocol. IPSec functions like a VPN but with encryption; it transports packets from one endpoint to another endpoint. IPSec has two modes, tunnel mode and transport mode. These instructions are for tunnel mode.</p><p>IPSec is ideal for steering HTTP and HTTPS traffic to the Netskope cloud. Configure the source peer IPSec device to send traffic over the IPSec VPN tunnel. The Netskope IPSec gateway validates the source identity of the tunnel configured in the Netskope admin console. If the tunnel identity is not known, the tunnel is not established.</p><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_N1571087759679"><div class="titlepage"><div><div class="title"><h5 class="title">Prerequisites</h5></div></div></div><p>To use IPSec:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Configure your source peer devices (like routers or firewalls) to establish the IPSec tunnel. Refer to your router (or firewall) documentation for specific configuration instructions.</p></li><li class="listitem"><p>Download the Netskope root certificate to provision on your devices. Get the Netskope root certificate from: <span class="bold bold"><strong>Settings &gt; Manage &gt; Certificates.</strong></span> If you install the Netskope Client on devices, this is not necessary.</p></li><li class="listitem"><p>Get the closest Netskope point of presence (POP), or data center, IP addresses to steer traffic to the Netskope cloud. Refer to <span class="bold bold"><strong>Settings &gt; <span class="phrase">Security Cloud Platform</span> &gt; Traffic Steering &gt; IPSec</strong></span>  in the Netskope UI to get the POP IP addresses. </p></li><li class="listitem"><p>Get the IP address or fully-qualified domain name and  pre-shared key for your source identity devices. You will need to enter this in the Netskope UI, along with the type of encryption cipher and the maximum bandwidth to use.</p></li><li class="listitem"><p>Ensure you have a <span class="phrase">Netskope Secure Web Gateway</span> license, which is required to use IPSec.</p></li><li class="listitem"><p>There is an absolute maximum of 16,000 hosts per IPSec tunnel.</p></li><li class="listitem"><p>HTTP and HTTPS traffic (typically on ports 80, and 443, but Netskope also supports custom ports) can be sent via the IPSec (or GRE) tunnel. Do not send any other traffic through these tunnels.</p></li><li class="listitem"><p>IKEv1 and IKEv2 are supported. The NAT-T setting must be enabled. The maximum number of tunnels per IKE connection at one time is 10. Following is the complete list of supported ciphers:</p><h6 id="UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_bridgehead-5d97af0bccbac-idm45530500910336" class="bridgehead">Phase 1 Parameters</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Encryption algorithms: AES128-CBC, AES192-CBC, AES256-CBC</p></li><li class="listitem"><p>Integrity algorithms: SHA256, SHA384, SHA512</p></li><li class="listitem"><p>DH Group: 14, 15, 16, 18</p></li><li class="listitem"><p>SA lifetime: 8 hours</p></li></ul></div><h6 id="UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_bridgehead-5d97b04150810-idm45530501302144" class="bridgehead">Phase 2 Parameters</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Encryption algorithms: AES128-CBC, AES256-CBC, AES128-GCM, AES192-GCM, AES256-GCM, Null</p></li><li class="listitem"><p>Integrity algorithms: SHA256, SHA384, SHA512</p></li><li class="listitem"><p>DH Group: 14, 15, 16, 18</p></li><li class="listitem"><p>PFS: Supported</p></li><li class="listitem"><p>SA lifetime: 2 hours</p></li></ul></div><h6 id="UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_bridgehead-5d9b893bb6a90-idm45530499338512" class="bridgehead">Authentication</h6><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>PSK</p></li></ul></div></li></ul></div></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_N1571087838501"><div class="titlepage"><div><div class="title"><h5 class="title">Workflow</h5></div></div></div><p>The primary steps to configure IPSec include:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Configure IPSec tunnels in the Netskope UI.</p></li><li class="listitem"><p>Configure IPSec tunnels on your source identity devices.</p></li><li class="listitem"><p>After configuring the IPSec tunnels, choose steering/identity options, such as install the Netskope Client or provision the Netskope root certificate on devices.</p></li></ol></div><p>To watch videos about IPSec setup, steering, and use, go to: <a class="link" href="https://support.netskope.com/hc/en-us/sections/360005848933-Microlearning" target="_blank" rel="noopener">Netskope Microlearning videos</a>.</p></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_N1571088024384"><div class="titlepage"><div><div class="title"><h5 class="title">Configure IPSec in the Netskope UI</h5></div></div></div><p>Follow these steps to set up your IPSec tunnels, which requires adding the IP address or fully-qualified domain name (FQDN) of your routers/firewalls in the Netskope admin console. You will also need to know the pre-shared key used for authentication in you router/firewall to complete these steps.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Go to <span class="bold bold"><strong>Settings &gt; <span class="phrase">Security Cloud Platform</span> &gt; Traffic Steering &gt; IPSec.</strong></span> </p></li><li class="listitem"><p>You can add IPSec tunnels manually or by uploading a CSV file. To add new IPSec tunnels manually, review these field descriptions ,and then proceed to step 3. To upload a CSV file, which can be up to 10MB large, make sure the file includes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Tunnel name: Create a tunnel name that makes sense to your topology.</p></li><li class="listitem"><p>Source IP address: (Optional) As an added security measure, you can restrict this tunnel to only this source IP. Leave this field blank if the source IP address is not static and changes frequently.</p></li><li class="listitem"><p>Source identity: Enter an IP address, a fully-qualified domain name (FQDN), or an ID in email address format. For example, 1.1.1.1., sourcelocation.company.com, or sourcelocation@company.com., respectively. The source identity is used as the IKE identifier on the router that originates the tunnel.</p></li><li class="listitem"><p>Primary and Failover Netskope point of presence (POP): Select POPs closest to your location from the dropdown lists.</p></li><li class="listitem"><p>Encryption cipher type: Select one from the dropdown list.</p></li><li class="listitem"><p>Pre-shared key: Enter a pre-shared key that both sides of the tunnel will use to authenticate one another. Must be unique for each tunnel.</p></li><li class="listitem"><p>Max bandwidth limit (in Mbps): (Optional) Designates expected tunnel size. Up to 250 Mbps can be used. </p></li><li class="listitem"><p>Tunnel state: Like Enabled=true.</p></li></ul></div><p>Arrange the column structure in the CSV file in this order: Tunnel Name, Source IP Address, Source Identity, Primary POP, Failover POP, Encryption, Cipher, PSK, Maximum Bandwidth, Enabled. For example:</p><pre class="programlisting">tunnel name,source identity,source ip address,primary pop,failover pop,encryption cipher,psk,maximum bandwidth,enabled
TunnelHQ,admin@abc.net,1.1.1.1,31.186.239.114,163.116.178.38,AES128-CBC,netSk0pe,50,true
</pre><p>To upload a CSV file, click <span class="bold bold"><strong>Import Tunnels from CSV</strong></span>, click <span class="bold bold"><strong>Select CSV File</strong></span>, and select the file. Review the list, and then click <span class="bold bold"><strong>Import</strong></span>, which takes you back to the IPSec page.</p></li><li class="listitem"><p>To create a new IPSec tunnel individually in the UI, click <span class="bold bold"><strong>Add New Tunnel</strong></span>, and then add or select these parameters:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Enter a unique tunnel name.</p></li><li class="listitem"><p>Enter the source IP address.</p></li><li class="listitem"><p>Enter the source identity in email address format. </p></li><li class="listitem"><p>Select the Primary and Failover Netskope POPs from the dropdown lists. Select POPs nearest to your location.</p></li><li class="listitem"><p>Enter your pre-shared key. </p></li><li class="listitem"><p>Select an encryption cipher type from the dropdown list.</p></li><li class="listitem"><p>Select the maximum bandwidth for the tunnel from the dropdown list.</p></li></ul></div><p>When finished, click <span class="bold bold"><strong>Save</strong></span>, which takes you back to the IPSec page.</p></li></ol></div><p>After a tunnel has been established, it appears in the table on the IPSec page. The table shows the status of the tunnel, the name, source peer, Netskope POP, and the throughput in kilobytes per second (Kpbs). You can edit, disable, or delete a tunnel.</p><p>The status types are: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Tunnel Up: The IPSec service is observing keepalive packets from the IPSec device.</p></li><li class="listitem"><p>Tunnel Down: The IPSec service is not observing any keepalive packets for one minute from the IPSec device. Tunnel down does not mean Netskope will stop processing a tunnel packet; Netskope continues to process the packet.</p></li><li class="listitem"><p>Tunnel Unknown: This is a transient state if the IPSec service is not reported any status to the Netskope UI.</p></li></ul></div><p>Tunnel status is displayed as up or down based on the RFC standard Dead Peer Detection.  Enable your tunnel as a permanent tunnel or enable Dead Peer Detection on the device to ensure a reliable status output in the UI.</p><p>Click on a tunnel to open the Tunnel Details side panel, and to make changes to the tunnel, click <span class="bold bold"><strong>Edit</strong></span>. Also, click the <span class="bold bold"><strong>...</strong></span> icon to the right of the tunnel listing to view details, edit, enable, disable, or delete the tunnel.</p></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_N1571088136137"><div class="titlepage"><div><div class="title"><h5 class="title">Configure IPSec Tunnels</h5></div></div></div><p>Netskope recommends configuring IPSec tunnels from your router/firewall to two different Netskope POPs. This ensures resiliency for tunneling traffic through IPSec in the event one of the two identity source peers is temporarily not available.</p><p>Here is an example of how to configure your IPSec tunnels:</p><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:495px;
                            "><tr><td style="padding:0;"><img src="image/uuid-a9fa81dc-36b8-bef7-666a-7ca398c91417.png" style="max-width: 495px; " alt="IPSecflowDiagrams.png"></img></td></tr></table></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Configure your router/firewall for IPSec. Use policy-based routing so only web  traffic is steered through the IPSec tunnel.</p></li><li class="listitem"><p>Configure the IPSec tunnel to direct traffic to the the Netskope POP. The POP addresses are available in the Netskope admin console at <span class="bold bold"><strong>Settings &gt; <span class="phrase">Security Cloud Platform</span> &gt; Traffic Steering &gt; IPSec</strong></span> when you click <span class="bold bold"><strong>Add New Tunnel</strong></span>. The POPs are shown in the dropdown lists for the Primary and Failover Netskope POPs.</p></li><li class="listitem"><p>Once traffic is directed to the Netskope cloud, use the Netskope admin console to manage the connections. </p></li></ol></div></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_N1571088599761"><div class="titlepage"><div><div class="title"><h5 class="title">Traffic Steering and Identity Options</h5></div></div></div><p>To steer traffic and identify users, use one or more of these method.</p><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="idm46096602418640"><div class="titlepage"><div><div class="title"><h6 class="title">Install the Netskope Client for Root CA Distribution, User Identity, and User Notifications</h6></div></div></div><p>Installing the Netskope Client is optional, but doing so facilitates certificate distribution on devices and provides coverage for remote users. The Client provides user identification directly to Netskope and eliminates the need to implement authentication on the IPSec tunnel.</p><p>We recommend installing the Client so it can send device and user info to the Netskope Cloud and show user-facing notifications that result from policy violations. To do this, go to <span class="bold bold"><strong>Settings &gt; <span class="phrase">Security Cloud Platform</span> &gt; Netskope Client &gt; Devices &gt; Client Configuration</strong></span> and enable the feature <span class="emphasis"><em>Enable Device Classification and Client-Based End User Notifications when the Client is Disabled</em></span>.  When the Client detects an IPSec tunnel, it disables the data tunnel (TLS tunnel) to the Netskope platform, but continues sending user identity to Netskope and facilitating user notifications on the endpoint.</p></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="idm46096602417888"><div class="titlepage"><div><div class="title"><h6 class="title">Provision Certificates on Devices</h6></div></div></div><p>Get the root certificate from the Netskope UI and provision it on your devices. In the Netskope UI. Go to <span class="bold bold"><strong>Settings &gt; Manage &gt; Certificates</strong></span> to download the certificates. </p></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_N1571089119960"><div class="titlepage"><div><div class="title"><h6 class="title">Use SAML Authentication</h6></div></div></div><p>You can use SAML to authenticate a user to Netskope before their connection is allowed to traverse the IPSec tunnel. Use Netskope as an authentication mode to integrate with an Identity Provider (IdP). This feature acts as an authentication module taking Netskope's framework and an IdP's auth assertion after authentication.</p><p>To watch a video about forward proxy SAML authentication configuration for IPSec, click <span class="phrase">play</span>.</p><div class="mediaobject"><div class="video-container wistia"><div class="videoobject"><script async="" src="https://fast.wistia.com/embed/medias/5uukr5qeud.jsonp"></script><script async="" src="https://fast.wistia.net/assets/external/E-v1.js"></script><div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;"><div style="height:100%;width:100%" class="wistia_embed wistia_async_5uukr5qeud seo=false videoFoam=true"> </div></div></div></div></div></div><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idm46096602407840"><div class="titlepage"><div><div class="title"><h6 class="title">Enable Authentication</h6></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Go to <span class="bold bold"><strong>Settings &gt; <span class="phrase">Security Cloud Platform</span> &gt; Forward Proxy &gt; Authentication</strong></span>.</p></li><li class="listitem"><p>Click <span class="bold bold"><strong>Enable Authentication</strong></span>.</p></li><li class="listitem"><p>Click the <span class="bold bold"><strong>Enabled</strong></span> checkbox to turn this feature on.</p></li><li class="listitem"><p>For the Authentication Type, select <span class="bold bold"><strong>SAML based</strong></span>.</p></li><li class="listitem"><p>Click<span class="bold bold"><strong> Create New</strong></span> for SAML based authentication. The Add SAML Account window opens.</p></li><li class="listitem"><p>Configure these parameters:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Name: Enter a name identifying the account.</p></li><li class="listitem"><p>IdP URL: Contact your third party Identity Provider and add the unique IdP login URL in this field.</p></li><li class="listitem"><p>IdP Entity ID:  Type your globally unique name for your SAML entity.</p></li><li class="listitem"><p>IdP Certificate: Copy and paste the PEM format certificate of the third party IdP in this field. This is required by Netskope to validate the signature of the SAML assertion.</p></li><li class="listitem"><p>Alternate User ID Field: Netskope looks at the NameID field in the SAML assertion to get the user identity. If you would like to use another field for user identification, type the name of the SAML attribute in this field.</p></li><li class="listitem"><p>Group Attribute: Type your name:value pair to identify / describe your entities user group and role memberships.</p></li></ul></div></li><li class="listitem"><p>Click <span class="bold bold"><strong>Save</strong></span>.</p></li></ol></div></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_N1571089421369"><div class="titlepage"><div><div class="title"><h6 class="title">Authentication Bypass Settings</h6></div></div></div><p>You can specify domains, web categories, and network IP addresses for which user authentication is not required.</p><h8 id="idm46096602392976" class="bridgehead">Domain Bypass</h8><p>Click <span class="bold bold"><strong>Edit</strong></span> and add comma-separated URLs to bypass. When finished, click <span class="bold bold"><strong>Save</strong></span>.</p><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:405px;
                            "><tr><td style="padding:0;"><img src="image/uuid-382d9792-0174-08ff-2f67-29a8f9a95ed3.png" style="max-width: 405px; " alt="FPauthDomainsBypass.png"></img></td></tr></table></div><div dir="ltr" class="note"><h3 class="title">Note</h3><p>Adding your IdP domains here are recommended.</p></div><h8 id="idm46096602389008" class="bridgehead">Web Category Bypass</h8><p>Click <span class="bold bold"><strong>Edit</strong></span> and add comma-separated URLs to bypass. When finished, click <span class="bold bold"><strong>Save</strong></span>.</p><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:405px;
                            "><tr><td style="padding:0;"><img src="image/uuid-7d20ea25-5740-5042-270f-08390be79554.png" style="max-width: 405px; " alt="FPauthWebCategoryBypass.png"></img></td></tr></table></div><h8 id="idm46096602385232" class="bridgehead">IP Address Bypass</h8><p>Click <span class="bold bold"><strong>Edit</strong></span> and search for source networks. For each of the networks found, you can choose to bypass based on User IPs or Egress IPs (just one, not both).</p><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:405px;
                            "><tr><td style="padding:0;"><img src="image/uuid-3ea3112d-ea19-1d34-89a2-67d2b9f8e4a5.png" style="max-width: 405px; " alt="FPauthIPaddressBypass.png"></img></td></tr></table></div><p>If search does not locate the network you want to bypass, click <span class="bold bold"><strong>+New</strong></span> to add it.</p><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:405px;
                            "><tr><td style="padding:0;"><img src="image/uuid-e1e0a43f-ce40-63e8-4609-32cd83387a68.png" style="max-width: 405px; " alt="FPauthIPaddressBypassAddNetwork1.png"></img></td></tr></table></div><p>Enter the IP address, IP address range, or CIDR netmask in the text field, and then click the adjacent <span class="bold bold"><strong>+</strong></span> button. Multiple network locations can be added. After adding the network locations, click <span class="bold bold"><strong>Next</strong></span>, enter a name, and then click <span class="bold bold"><strong>Save Network Location</strong></span>.</p><p>Select <span class="bold bold"><strong>User IP</strong></span> or <span class="bold bold"><strong>Egress Source IP</strong></span> for each network location, and then click <span class="bold bold"><strong>Save</strong></span>.</p></section></section></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-b6f31806-0d15-5cbb-d63b-c7358843585d">IPSec</a></li><li><a href="#UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_N1571087759679">Prerequisites</a></li><li><a href="#UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_N1571087838501">Workflow</a></li><li><a href="#UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_N1571088024384">Configure IPSec in the Netskope UI</a></li><li><a href="#UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_N1571088136137">Configure IPSec Tunnels</a></li><li><a href="#UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_N1571088599761">Traffic Steering and Identity Options</a><ul class="nav"><li><a href="#idm46096602418640">Install the Netskope Client for Root CA Distribution, User Identity, and User Notifications</a></li><li><a href="#idm46096602417888">Provision Certificates on Devices</a></li><li><a href="#UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_N1571089119960">Use SAML Authentication</a><ul class="nav"></ul></li></ul></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div id="email-feedback" class="no-voting toggle-feedback"><p><a href="mailto:techpubs@netskope.com?subject=Feedback%20for%20help%20topic%20%22IPSec%22&amp;body=%0A%09%09%09%09%0A%09%09%09%09%0A%09%09%09%09_______________________%0A%09%09%09%09%0A%09%09%09Please%20add%20your%20feedback%20above%20for%20topic%20%22IPSec%22%20in%20the%20publication%20%22Netskope%20Help%22."><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon"></i>Would you like to provide feedback? Just click here to suggest edits.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="configure-custom-applications.html#UUID-e6c6fd77-9f1e-8176-a604-a71a54517be8_N1562703095129">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="ipsec-129296.html#UUID-b6f31806-0d15-5cbb-d63b-c7358843585d_N1571087759679">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2021 Netskope </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">April 22, 2021</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
