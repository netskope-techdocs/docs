<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				
			
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Configure the Appliance in Explicit Proxy mode</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/rwd-table.min.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/layout-custom-style.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/rwd-table.min.js" type="text/javascript"></script><script src="../js/responsive-tables.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/lunr.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="js/data.js" type="text/javascript"></script><script src="../js/search.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/jquery.paligocode.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta name="generator" content="Paligo"></meta><link rel="prev" href="configure-the-appliance-in-dns-mode-144870.html" title="Configure the appliance in DNS mode"></link><link rel="next" href="configure-the-appliance-in-explicit-proxy-mode-144871.html#idm45980196321808" title="Configure the proxy hostname and port"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script type="text/javascript">var containerid = 'GTM-W56WJ8S';

						(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
						new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
						j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
						'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
						})(window,document,'script','dataLayer',containerid);
					</script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc collapsible-sidebar-nav current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><h1 class="publication-title">Netskope Help</h1><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print print-icon"><a onclick="window.print();return false;"><i class="fa fa-print" aria-hidden="true"><span class="print-text">print</span></i></a></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="index-en.html">Netskope Help</a></li><li class="breadcrumb-link"><a href="appliances.html">Appliances</a></li><li class="breadcrumb-link"><a href="virtual-appliance.html">Virtual Appliance</a></li><li class="breadcrumb-link"><a href="configure-thedataplane-on-premises--dpop--appliance-144866.html">Configure the Dataplane On-Premises (DPoP) Appliance</a></li><li class="breadcrumb-node">Configure the Appliance in Explicit Proxy mode</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="configure-the-appliance-in-dns-mode-144870.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="configure-the-appliance-in-explicit-proxy-mode-144871.html#idm45980196321808">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-619e5e1f-8a7e-992a-4d46-55cbfd0297c7" data-permalink="configure-the-appliance-in-explicit-proxy-mode-144871.html" data-topic-level="1" data-relative-prefix="" data-time-modified="May 2, 2019" data-publication-date="" id="UUID-6e92d843-70f7-63ec-47ab-b8147f180320"><div class="titlepage"><div><div class="title"><h5 class="title">Configure the Appliance in Explicit Proxy mode</h5></div></div></div><p>In the explicit proxy mode, the appliance acts as a proxy server or integrates with the existing proxy servers in the network to serve as the explicit proxy for the cloud app domains. You can make the appliance an explicit proxy server using the following methods.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Configure the proxy hostname and port</p></li><li class="listitem"><p>Configure the PAC file</p></li></ul></div><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idm45980196321808"><div class="titlepage"><div><div class="title"><h6 class="title">Configure the proxy hostname and port</h6></div></div></div><p>All the network traffic is sent directly to the appliance on a specific port. To configure the proxy hostname and port,</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Enable the explicit proxy mode on the appliance, run</p><pre class="programlisting">set dataplane proxy-mode explicit enable true</pre></li><li class="listitem"><p>Configure the default IP address that the appliance uses to listen to the client traffic. This address is the first address configured on the inbound interface.</p><pre class="programlisting">set dataplane proxy-listener-ip 172.16.1.10
</pre><p>In appliance version 58 and higher, run the following command.</p><pre class="programlisting">set dataplane proxy-listener-interface dp1</pre></li><li class="listitem"><p>Optionally, specify the TCP port for the explicit proxy. If not specified, the default port is 8080.</p><pre class="programlisting">set dataplane proxy-mode explicit listener-port <span class="emphasis"><em>&lt;port&gt;</em></span></pre></li></ol></div></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idm45980196369328"><div class="titlepage"><div><div class="title"><h6 class="title">Configure the PAC file</h6></div></div></div><p>You can direct all the cloud app traffic to the appliance while other traffic can go through your existing proxy server. To do this, the appliance needs to be configured to access the contents of the existing PAC file.</p><p>The appliance can be configured in the following two ways:</p><p><a class="link" href="configure-the-appliance-in-explicit-proxy-mode-144871.html#UUID-6e92d843-70f7-63ec-47ab-b8147f180320_N1516843381359" title="Use merged PAC file">Use merged PAC file</a> - The appliance downloads the existing PAC file and in turn hosts a modified PAC file that redirects cloud app traffic to the appliance's proxy server and retains the PAC file rules for all other traffic.</p><p><a class="link" href="configure-the-appliance-in-explicit-proxy-mode-144871.html#UUID-6e92d843-70f7-63ec-47ab-b8147f180320_N1516843588145" title="Use a custom PAC file">Use custom PAC file</a> - Host your customized PAC file directly on the appliance to redirect cloud app traffic to the appliance's proxy server and all other traffic to your existing proxy server.</p><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-6e92d843-70f7-63ec-47ab-b8147f180320_N1516843381359"><div class="titlepage"><div><div class="title"><h6 class="title">Use merged PAC file</h6></div></div></div><p>If you want to direct the cloud app traffic to the appliance and the web traffic to your existing proxy server, configure the merged PAC file server on the<span class="phrase">Secure Forwarder</span>.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Open an nsshell and enter the command <code class="literal">configure</code>.</p></li><li class="listitem"><p>Set the IP address to host the merged PAC file server on the <span class="phrase">Secure Forwarder</span>. If not provided, the IP address of the DNS server is used if it is configured:</p><pre class="programlisting">set dataplane pac-server listener-ip <span class="italic italic">&lt;PAC server IP&gt;</span></pre><p>In appliance version 58 and higher, run the following command.</p><pre class="programlisting">set dataplane pac-server listener-interface <span class="italic italic">&lt;PAC server interface&gt;</span></pre></li><li class="listitem"><p>Set the TCP port to host the merged PAC file server on the <span class="phrase">Secure Forwarder</span>:</p><pre class="programlisting">set dataplane pac-server listener-port <span class="italic italic">&lt;PAC server port&gt;</span></pre></li><li class="listitem"><p>Set the URL of the existing PAC file server:</p><pre class="programlisting">set dataplane pac-server url http://wpad.yourdomain.com/wpad.dat
</pre></li><li class="listitem"><p>Enable the PAC file server:</p><pre class="programlisting">set dataplane pac-server enable true</pre></li><li class="listitem"><p>Save the configuration:</p><pre class="programlisting">save</pre><p>The PAC file will be hosted at <code class="literal">http://<span class="emphasis"><em>&lt;PAC server IP&gt;</em></span>:<span class="emphasis"><em>&lt;pac-server-port&gt;</em></span>/wpad.dat</code> and <code class="literal">http://<span class="emphasis"><em>&lt;PAC server IP&gt;</em></span>:<span class="emphasis"><em>&lt;pac-server-port&gt;</em></span> /proxy.pac</code>.</p></li><li class="listitem"><p>Enable the explicit proxy mode for the <span class="phrase">Secure Forwarder</span> by doing the following:</p><pre class="programlisting">set dataplane proxy-mode explicit enable true</pre></li><li class="listitem"><p>Optionally, specify the fully-qualified domain name that resolves to the IP configured for the <span class="phrase">Secure Forwarder</span>. This host name will be used in the merged PAC file. If this setting is not provided, the <span class="phrase">Secure Forwarder</span> IP will be present in the merged PAC file.</p><pre class="programlisting">set dataplane pac-server explicit-proxy-hostname sfproxy.yourdomain.com</pre></li><li class="listitem"><p>Optionally specify the TCP port for hosting the <span class="phrase">Secure Forwarder</span> explicit proxy. The default port used by the <span class="phrase">Secure Forwarder</span> is 8080.</p><pre class="programlisting">set dataplane proxy-mode explicit listener-port <span class="emphasis"><em>&lt;explicit proxy port&gt;</em></span></pre></li><li class="listitem"><p>Save the configuration.</p><pre class="programlisting">save</pre></li></ol></div></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-6e92d843-70f7-63ec-47ab-b8147f180320_N1516843588145"><div class="titlepage"><div><div class="title"><h6 class="title">Use a custom PAC file</h6></div></div></div><p>If you want to host your customized PAC file directly on the<span class="phrase">Secure Forwarder</span>.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Open an nsshell and enter the command <code class="literal">configure</code>.</p></li><li class="listitem"><p>Set the IP address to host the merged PAC file server on the <span class="phrase">Secure Forwarder</span>. If not provided, the IP address of the DNS server is used if it is configured:</p><pre class="programlisting">set dataplane pac-server listener-ip <span class="italic italic">&lt;PAC server IP&gt;</span></pre><p>In appliance version 58 and higher, run the following command.</p><pre class="programlisting">set dataplane pac-server listener-interface <span class="italic italic">&lt;PAC server interface&gt;</span></pre></li><li class="listitem"><p>Set the TCP port to host the merged PAC file server on the <span class="phrase">Secure Forwarder</span>:</p><pre class="programlisting">set dataplane pac-server listener-port <span class="italic italic">&lt;PAC server port&gt;</span></pre></li><li class="listitem"><p>Paste the contents of the PAC file server: </p><pre class="programlisting">set dataplane pac-server custom-pac</pre></li><li class="listitem"><p>Enable the PAC file server:</p><pre class="programlisting">set dataplane pac-server enable true</pre></li><li class="listitem"><p>Save the configuration:</p><pre class="programlisting">save</pre><p>The PAC file will be hosted at <code class="literal">http://<span class="emphasis"><em>&lt;PAC server IP&gt;</em></span>:<span class="emphasis"><em>&lt;pac-server-port&gt;</em></span>/wpad.dat</code> and <code class="literal">http://<span class="emphasis"><em>&lt;PAC server IP&gt;</em></span>:<span class="emphasis"><em>&lt;pac-server-port&gt;</em></span> /proxy.pac</code>.</p></li><li class="listitem"><p>Enable the explicit proxy mode for the <span class="phrase">Secure Forwarder</span> by doing the following:</p><pre class="programlisting">set dataplane proxy-mode explicit enable true</pre></li><li class="listitem"><p>Optionally, specify the fully-qualified domain name that resolves to the IP configured for the <span class="phrase">Secure Forwarder</span>. This host name will be used in the merged PAC file. If this setting is not provided, the <span class="phrase">Secure Forwarder</span> IP will be present in the merged PAC file.</p><pre class="programlisting">set dataplane pac-server hostname sfproxy.yourdomain.com</pre></li><li class="listitem"><p>Optionally specify the TCP port for hosting the <span class="phrase">Secure Forwarder</span> explicit proxy. The default port used by the <span class="phrase">Secure Forwarder</span> is 8080.</p><pre class="programlisting">set dataplane proxy-mode explicit listener-port <span class="emphasis"><em>&lt;explicit proxy port&gt;</em></span></pre></li><li class="listitem"><p>Save the configuration.</p><pre class="programlisting">save</pre></li></ol></div></section></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idm45980196360880"><div class="titlepage"><div><div class="title"><h6 class="title">Configuring an explicit proxy chain</h6></div></div></div><p>In explicit proxy mode, the appliance can work with other explicit proxy server in the network to load balance the network traffic. The appliance sends HTTP requests to the third-party proxy server to establish an explicit proxy chain. When the connection between the appliance and the third-party proxy server is successful, a tunnel is established to send and receive client requests that are trying to reach the cloud apps.</p><p>If you want to create an explicit proxy chain between the appliance and your existing third-party proxy server, run</p><pre class="programlisting">set dataplane explicit-proxy-chaining hostname <span class="emphasis"><em>&lt;hostname or IP address&gt;</em></span>
set dataplane explicit-proxy-chaining port <span class="emphasis"><em>&lt;port&gt;</em></span>
set dataplane explicit-proxy-chaining enable true</pre></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-6e92d843-70f7-63ec-47ab-b8147f180320">Configure the Appliance in Explicit Proxy mode</a></li><li><a href="#idm45980196321808">Configure the proxy hostname and port</a></li><li><a href="#idm45980196369328">Configure the PAC file</a><ul class="nav"><li><a href="#UUID-6e92d843-70f7-63ec-47ab-b8147f180320_N1516843381359">Use merged PAC file</a></li><li><a href="#UUID-6e92d843-70f7-63ec-47ab-b8147f180320_N1516843588145">Use a custom PAC file</a></li></ul></li><li><a href="#idm45980196360880">Configuring an explicit proxy chain</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div id="email-feedback" class="no-voting toggle-feedback"><p><a href="mailto:techpubs@netskope.com?subject=Feedback%20for%20help%20topic%20%22Configure%20the%20Appliance%20in%20Explicit%20Proxy%20mode%22&amp;body=%0A%09%09%09%09%0A%09%09%09%09%0A%09%09%09%09_______________________%0A%09%09%09%09%0A%09%09%09Please%20add%20your%20feedback%20above%20for%20topic%20%22Configure%20the%20Appliance%20in%20Explicit%20Proxy%20mode%22%20in%20the%20publication%20%22Netskope%20Help%22."><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon"></i>Would you like to provide feedback? Just click here to suggest edits.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="configure-the-appliance-in-dns-mode-144870.html">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="configure-the-appliance-in-explicit-proxy-mode-144871.html#idm45980196321808">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2021 Netskope </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">May 2, 2019</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div><!--Google Tag Manager (noscript)--><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W56WJ8S" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!--End Google Tag Manager (noscript)--></body></html>
