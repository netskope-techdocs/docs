<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			var versionsfile = '';


			var indexDict = new Array();
			var store = {};
			var portalLanguage = 'en';
			var enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				
			
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><title>Enable PII Privacy Settings</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/rwd-table.min.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/layout-custom-style.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/rwd-table.min.js" type="text/javascript"></script><script src="../js/responsive-tables.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/anchorlinks.js" type="text/javascript"></script><script src="../js/lunr.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="js/data.js" type="text/javascript"></script><script src="../js/search.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/jquery.paligocode.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta name="generator" content="Paligo"></meta><link rel="prev" href="fetch-events-144880.html#idm45652863358288" title="View Cron Jobs"></link><link rel="next" href="enable-pii-privacy-settings-144881.html#idm45652863344496" title="Enable PII Settings in the Tenant UI"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script type="text/javascript">var containerid = 'GTM-W56WJ8S';

						(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
						new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
						j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
						'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
						})(window,document,'script','dataLayer',containerid);
					</script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script></head><body class="theme1 fixed-toolbar colored-top page-toc collapsible-sidebar-nav current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div id="navbar" class="navbar-collapse collapse"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><h1 class="publication-title">Netskope Help</h1><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print print-icon"><a onclick="window.print();return false;"><i class="fa fa-print" aria-hidden="true"><span class="print-text">print</span></i></a></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"> <a href="index-en.html">Netskope Help</a></li><li class="breadcrumb-link"><a href="appliances.html">Appliances</a></li><li class="breadcrumb-link"><a href="virtual-appliance.html">Virtual Appliance</a></li><li class="breadcrumb-link"><a href="advanced-options.html">Advanced Options</a></li><li class="breadcrumb-node">Enable PII Privacy Settings</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="fetch-events-144880.html#idm45652863358288">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="enable-pii-privacy-settings-144881.html#idm45652863344496">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-be8d60ae-1a25-7243-cb97-20759437c17d" data-permalink="enable-pii-privacy-settings-144881.html" data-topic-level="1" data-relative-prefix="" data-time-modified="December 14, 2020" data-publication-date="" id="UUID-1429066b-aa0e-90bf-26a3-61da6be2c38d"><div class="titlepage"><div><div class="title"><h5 class="title">Enable PII Privacy Settings</h5></div></div></div><p>Customer Data Privacy Proxy (CDPP) is a powerful yet simple way for you to get enhanced technical privacy controls over your personally identifiable information (PII) data. CDPP can encrypt PII information in the uploaded logs such as user data, source IP addresses, and URL information.</p><p>The following diagram provides the CDPP workflow.</p><div class="mediaobject"><img src="image/uuid-7582c329-04fd-0d5c-2a78-44d47e5df591.png" style="" alt="CDPP_OPLP_DPoP.png" title="CDPP_OPLP_DPoP.png"></img></div><p>This feature is available for all tenants, but is disabled by default. Contact <code class="email"><a class="email" href="mailto:support@netskope.com">support@netskope.com</a></code> to get this feature enabled.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>Netskope recommends that you enable CDPP on a dedicated virtual or physical appliance that runs only in CDPP mode.</p></div><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idm45652863344496"><div class="titlepage"><div><div class="title"><h6 class="title">Enable PII Settings in the Tenant UI</h6></div></div></div><p>To enable the PII privacy settings:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>In the tenant UI, go to <span class="bold bold"><strong>Settings &gt; Manage &gt; CDPP for Appliance</strong></span> and click <span class="bold bold"><strong>Edit</strong></span>.</p></li><li class="listitem"><p>Enable the toggle and select the fields you want to protect.</p></li><li class="listitem"><p>Click <span class="bold bold"><strong>Save</strong></span>.</p></li></ol></div></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idm45652863344240"><div class="titlepage"><div><div class="title"><h6 class="title">Enable PII Settings using the Command Line Interface</h6></div></div></div><p>To enable the CDPP service, you must run <code class="literal">set pii-privacy-proxy enable true</code> and generate an encryption key by running <code class="literal">request key generate pii-privacy-proxy</code>. The encryption key is used to encrypt the data and uses a self-signed certificate for the reverse proxy that will be listening on port 443 (default).</p><p>The complete step-by-step commands are:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Enter <code class="literal">configure</code> to enter configuration mode.</p></li><li class="listitem"><p>Enter <code class="literal">set pii-privacy-proxy enable true</code> to enable CDPP.</p></li><li class="listitem"><p>Enter <code class="literal">save</code> to enable the setting.</p></li><li class="listitem"><p>Enter <code class="literal">exit</code> to leave configuration mode.</p></li><li class="listitem"><p>Enter <code class="literal">request key generate pii-privacy-proxy</code> to generates the encryption key required to activate the configuration.</p></li><li class="listitem"><p>Enter <code class="literal">exit</code> to leave the configuration shell.</p></li></ol></div><p>Additional commands can be used to tailor the configuration to your environment's requirements: like moving to a port other than 443, or using a real certificate/key for the reverse proxy.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>CDPP is enabled to create and store encryption and decryption keys for event fields locally. If you want to use your own key manager with CDPP to create and store encryption and decryption keys then enable KMIP. For more information see, <a class="xref" href="enable-pii-privacy-settings-144881.html#UUID-1429066b-aa0e-90bf-26a3-61da6be2c38d_N1529348812185" title="KMIP CLI Commands for PII Privacy"><span class="xreftitle">KMIP CLI Commands for PII Privacy</span></a>.</p></div></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="idm45652863337200"><div class="titlepage"><div><div class="title"><h6 class="title">Multi-Node Deployments</h6></div></div></div><p>Multiple OPLP and CDPP systems can be deployed to increase scale or to provide geographical distribution.</p><p>Because OPLP and CDPP are essentially stateless, there's no data to replicate or backup, so the same encryption keys must be installed on all of them. This is accomplished by exporting the keys from the first system and later importing them in subsequent systems. The <code class="literal">pii-privacy-proxy import</code> and <code class="literal">pii-privacy-proxy export</code> operational commands in the nsshell are used for this purpose.</p></section><section dir="ltr" class="section internal internal" data-origin-id="" data-publication-date="" id="UUID-1429066b-aa0e-90bf-26a3-61da6be2c38d_N1529348812185"><div class="titlepage"><div><div class="title"><h6 class="title">KMIP CLI Commands for PII Privacy</h6></div></div></div><p>The standard capability of the PII privacy proxy only allows symmetric encryption keys to be used to encrypt event fields created and stored locally. A Key Management Interoperability Protocol (KMIP) integration allows the OPLP to retrieve keys from a key manager over KMIP, which is a standardized communication protocol that defines message formats for cryptographic keys on a key management server. Using KMIP, PII privacy can be applied to events from an input log file. The events have fields such as src_ip (source IP address), user (username), and email (user email address) that can be encrypted for privacy reasons.</p><p>When KMIP server settings are enabled, OPLP uses symmetric keys that are retrieved from an external key manager to encrypt and decrypt data.</p><p>These new CLI commands have been added for configuring KMIP server parameters used by the KMIP client service running on the OPLP.</p><p>To configure KMIP parameters:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Enter <code class="literal">nsshell</code> at the Linux shell prompt, to enter the Netskope configuration shell. Make sure you are logged in as the <code class="literal">nsadmin</code> user.</p></li><li class="listitem"><p>Enter <code class="literal">configure</code>, to enter configuration mode, then enter any of these commands:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal">set kmip-server ca-cert</code></p><p>Copy and paste your CA certificate in the buffer, press Enter , then type Ctrl-D to exit.</p><p>Specifies the CA cert to be used while verifying KMIP server certificate</p></li><li class="listitem"><p><code class="literal">set kmip-server client-cert </code></p><p>Copy and paste your CA certificate in the buffer, press Enter , then type Ctrl-D to exit.</p><p>Specifies the client certificate to be used during KMIP server interaction</p></li><li class="listitem"><p><code class="literal">set kmip-server client-key </code></p><p>Copy and paste your CA certificate in the buffer, press Enter , then type Ctrl-D to exit.</p><p>Specifies the client key to be used during KMIP server interaction</p></li><li class="listitem"><p><code class="literal">set kmip-server enable</code>: Enables integration with an existing key manager over KMIP</p></li><li class="listitem"><p><code class="literal">set kmip-server host<span class="emphasis"><em>&lt;hostname or IP address&gt;</em></span></code>: Specifies the KMIP server hostname or IP address</p></li><li class="listitem"><p><code class="literal">set kmip-server port <span class="emphasis"><em>&lt;port&gt;</em></span></code>: Specifies the KMIP server port (default port of 5696 is recommended).</p></li></ul></div></li><li class="listitem"><p>Enter <code class="literal">save</code> to activate the configuration and create required objects.</p></li><li class="listitem"><p>Enter <code class="literal">exit</code> to leave configuration mode.</p></li><li class="listitem"><p>Enter <code class="literal">exit</code> to leave the configuration shell.</p></li></ol></div><p>The KMIP commands listed above have to be set for the log collector process to connect to the external key manager over KMIP and retrieve keys for encrypting private fields in the processed events. Other optional commands include:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="literal"> set kmip-key-cache enable</code>: Enables in-memory caching for the keys retrieved from the HSM. Caching is enabled by default to limit the number of requests for fetching key objects from log files.</p></li><li class="listitem"><p><code class="literal"> set kmip-key-cache ttl <span class="emphasis"><em>&lt;time in seconds&gt;</em></span></code>: Sets the time-to-live for the keys inside the cache. If kmip-key-caching is enabled no time is specified, the default time is set to 1 hour.</p></li></ul></div><div dir="ltr" class="note"><h3 class="title">Note</h3><p>Netskope now runs four instances of nsdetokenizer fronted by HA proxy, and the number of detokenizer processes are not configurable. The configuration previously applicable to nsdetokenizer will now be applied to HA proxy.</p></div><div dir="ltr" class="note"><h3 class="title">Note</h3><p>With KMIP settings enabled, CDPP can still decrypt any data that was previously encrypted using local keys.</p></div></section></section><div class="footer-content"><div class="section-toc section-toc-after"><div class="section-toc-title">In this section<span class="section-toc-title-delimiter">: </span></div></div><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-1429066b-aa0e-90bf-26a3-61da6be2c38d">Enable PII Privacy Settings</a></li><li><a href="#idm45652863344496">Enable PII Settings in the Tenant UI</a></li><li><a href="#idm45652863344240">Enable PII Settings using the Command Line Interface</a></li><li><a href="#idm45652863337200">Multi-Node Deployments</a></li><li><a href="#UUID-1429066b-aa0e-90bf-26a3-61da6be2c38d_N1529348812185">KMIP CLI Commands for PII Privacy</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div id="email-feedback" class="no-voting toggle-feedback"><p><a href="mailto:techpubs@netskope.com?subject=Feedback%20for%20help%20topic%20%22Enable%20PII%20Privacy%20Settings%22&amp;body=%0A%09%09%09%09%0A%09%09%09%09%0A%09%09%09%09_______________________%0A%09%09%09%09%0A%09%09%09Please%20add%20your%20feedback%20above%20for%20topic%20%22Enable%20PII%20Privacy%20Settings%22%20in%20the%20publication%20%22Netskope%20Help%22."><i aria-hidden="true" class="fa fa-pencil-square-o feedbackicon"></i>Would you like to provide feedback? Just click here to suggest edits.</a></p></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="fetch-events-144880.html#idm45652863358288">Prev</a></li><li class="next"><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="enable-pii-privacy-settings-144881.html#idm45652863344496">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2021 Netskope </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">December 14, 2020</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div><!--Google Tag Manager (noscript)--><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W56WJ8S" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!--End Google Tag Manager (noscript)--></body></html>
